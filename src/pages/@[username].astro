---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const bios = await getCollection('bios');
  return bios.map(bio => ({
    params: { username: bio.id },
    props: { bio: bio.data },
  }));
}

const { username } = Astro.params;
const { bio } = Astro.props;
---

<Layout title={`${bio.display_name} - Blahaj.bio`}>
  <main class="min-h-screen bg-gradient-to-br from-blue-100 to-purple-100 py-16">
    <div class="max-w-2xl mx-auto px-4">
      <div class="bg-white rounded-2xl shadow-xl p-8">
        <div class="text-center mb-8">
          <h1 class="text-3xl font-bold text-gray-900">{bio.display_name}</h1>
          <p class="text-gray-600 mt-2">{bio.pronouns}</p>
        </div>
        
        <div class="prose max-w-none mb-8">
          <p class="text-gray-700 whitespace-pre-wrap">{bio.bio}</p>
        </div>
        
        {bio.links && (
          <div class="space-y-3">
            {bio.links.split('\n').map(link => (
              <a
                href={link}
                target="_blank"
                rel="noopener noreferrer"
                class="block w-full text-center py-2 px-4 rounded-lg bg-gradient-to-r from-blue-500 to-purple-500 text-white hover:opacity-90 transition-opacity"
              >
                {new URL(link).hostname}
              </a>
            ))}
          </div>
        )}
      </div>
    </div>
  </main>
</Layout>